# API & Protocol Reference

GammaTrade uses Protocol Buffers for internal communication between services. These messages are typically transported via Redis Pub/Sub.

## Core Message Types

### 1. Market Data (`MarketData`)

Represents a normalized price or trade update from an ingestion source.

| Field | Type | Description |
|-------|------|-------------|
| `type` | string | `PRICE`, `TRADE`, or `QUOTE` |
| `symbol` | string | Standardized symbol (e.g., `BTC/USD`) |
| `price` | double | Last trade or quote price |
| `timestamp` | int64 | Unix timestamp in milliseconds |
| `source` | string | Origin adapter (e.g., `alpaca`, `coinbase`) |

### 2. Trade Signal (`TradeSignal`)

Generated by the Strategy Engine to request an action.

| Field | Type | Description |
|-------|------|-------------|
| `signal_id` | string | Unique UUID for the signal |
| `symbol` | string | Target asset |
| `action` | Enum | `BUY`, `SELL`, `HOLD` |
| `order_type` | Enum | `MARKET`, `LIMIT`, `STOP`, etc. |
| `quantity` | double | Size of the trade |
| `target_adapter` | string | Specific execution venue |
| `confidence` | double | 0.0 - 1.0 score |

### 3. Execution Report (`ExecutionReport`)

Feedback from the Execution Router/Adapters regarding order status.

| Field | Type | Description |
|-------|------|-------------|
| `signal_id` | string | Correlates to original Signal ID |
| `order_id` | string | Broker-assigned ID |
| `status` | Enum | `FILLED`, `PARTIAL_FILL`, `REJECTED`, etc. |
| `filled_quantity` | double | Amount executed so far |
| `average_fill_price` | double | VTWAP of fills |
| `error_message` | string | Reason for rejection/failure |

## Enumerations

### ExecutionStatus

`PENDING`, `SUBMITTED`, `PARTIAL_FILL`, `FILLED`, `CANCELLED`, `REJECTED`, `EXPIRED`, `FAILED`

### TimeInForce

`DAY`, `GTC`, `IOC`, `FOK`
